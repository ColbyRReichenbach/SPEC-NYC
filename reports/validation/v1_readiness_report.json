{
  "started_at_utc": "2026-02-11T01:37:45.690476",
  "finished_at_utc": "2026-02-11T01:39:32.682979",
  "duration_sec": 106.99,
  "checks": [
    {
      "name": "unit_tests",
      "status": "pass",
      "detail": "exit=0; OK",
      "command": "python3 -m unittest tests.test_etl tests.test_evaluate tests.test_ai_security tests.test_monitoring -v",
      "duration_sec": 6.440330982208252,
      "log_path": "reports/validation/logs/unit_tests.log",
      "artifacts": null
    },
    {
      "name": "docker_compose_config",
      "status": "pass",
      "detail": "exit=0; time=\"2026-02-10T20:37:57-05:00\" level=warning msg=\"/Users/colbyreichenbach/Desktop/SPEC-NYC/docker-compose.yml: the attribute `version` is obsolete, it will be ignored, please remove it to avoid potential confusion\"",
      "command": "docker compose config -q",
      "duration_sec": 0.6545369625091553,
      "log_path": "reports/validation/logs/docker_compose_config.log",
      "artifacts": null
    },
    {
      "name": "docker_compose_up_db",
      "status": "pass",
      "detail": "exit=0;  Container spec_nyc_db  Running",
      "command": "docker compose up -d db",
      "duration_sec": 0.5110781192779541,
      "log_path": "reports/validation/logs/docker_compose_up_db.log",
      "artifacts": null
    },
    {
      "name": "db_connectivity",
      "status": "pass",
      "detail": "exit=0; db_ok",
      "command": "python3 -c \"from sqlalchemy import create_engine,text; import os; e=create_engine(os.environ['DATABASE_URL']); conn=e.connect(); conn.execute(text('SELECT 1')); conn.close(); print('db_ok')\"",
      "duration_sec": 0.9645509719848633,
      "log_path": "reports/validation/logs/db_connectivity.log",
      "artifacts": null
    },
    {
      "name": "db_schema_create",
      "status": "pass",
      "detail": "exit=0;   Base = declarative_base()",
      "command": "python3 -m src.database create",
      "duration_sec": 2.012407064437866,
      "log_path": "reports/validation/logs/db_schema_create.log",
      "artifacts": null
    },
    {
      "name": "etl_smoke",
      "status": "pass",
      "detail": "exit=0; 2026-02-10 20:38:05,684 - INFO - Wrote ETL CSV summary: reports/data/etl_run_20260211.csv",
      "command": "python3 -m src.etl --input reports/validation/smoke_inputs/etl_raw_smoke.csv --limit 220 --dry-run --write-report",
      "duration_sec": 2.356297254562378,
      "log_path": "reports/validation/logs/etl_smoke.log",
      "artifacts": null
    },
    {
      "name": "model_smoke",
      "status": "pass",
      "detail": "exit=0; 2026-02-10 20:38:34,852 - INFO - Generated SHAP artifacts: {'summary_plot_path': 'reports/model/shap_summary_v1_smoke.png', 'waterfall_plot_path': 'reports/model/shap_waterfall_v1_smoke.png', 'sample_size': 120, 'explainer_type': 'xgboost_pred_contribs'}",
      "command": "python3 -m src.model --input-csv reports/validation/smoke_inputs/train_smoke.csv --model-version v1_smoke --optuna-trials 1 --shap-sample-size 120 --no-mlflow",
      "duration_sec": 29.07099199295044,
      "log_path": "reports/validation/logs/model_smoke.log",
      "artifacts": null
    },
    {
      "name": "evaluate_smoke",
      "status": "pass",
      "detail": "exit=0; Overall => n=160, PPE10=0.963, MdAPE=0.028, R2=0.985",
      "command": "python3 -m src.evaluate --predictions-csv reports/model/evaluation_predictions_v1_smoke.csv --output-json models/metrics_v1_smoke_eval.json --segment-scorecard-csv reports/model/segment_scorecard_v1_smoke_eval.csv",
      "duration_sec": 4.595672130584717,
      "log_path": "reports/validation/logs/evaluate_smoke.log",
      "artifacts": null
    },
    {
      "name": "explain_smoke",
      "status": "pass",
      "detail": "exit=0; 2026-02-10 20:38:50,935 - INFO - Saved SHAP waterfall plot: reports/model/shap_waterfall_v1_smoke.png",
      "command": "python3 -m src.explain --model-path models/model_v1_smoke.joblib --evaluation-csv reports/model/evaluation_predictions_v1_smoke.csv --summary-plot-path reports/model/shap_summary_v1_smoke.png --waterfall-plot-path reports/model/shap_waterfall_v1_smoke.png --sample-size 120",
      "duration_sec": 9.6698899269104,
      "log_path": "reports/validation/logs/explain_smoke.log",
      "artifacts": null
    },
    {
      "name": "mlflow_track_smoke",
      "status": "pass",
      "detail": "exit=0; 2026/02/10 20:38:56 INFO alembic.runtime.migration: Will assume non-transactional DDL.",
      "command": "python3 -m src.mlops.track_run --metrics-json models/metrics_v1_smoke.json --model-artifact models/model_v1_smoke.joblib --scorecard-csv reports/model/segment_scorecard_v1_smoke.csv --predictions-csv reports/model/evaluation_predictions_v1_smoke.csv --run-name w6-validate-smoke --dataset-version w6_smoke",
      "duration_sec": 6.51053786277771,
      "log_path": "reports/validation/logs/mlflow_track_smoke.log",
      "artifacts": null
    },
    {
      "name": "drift_monitor_smoke",
      "status": "pass",
      "detail": "exit=0; }",
      "command": "python3 -m src.monitoring.drift --reference-csv reports/monitoring/reference_slice_v1.csv --current-csv reports/monitoring/current_slice_v1.csv --output-csv reports/monitoring/drift_w6_smoke.csv --output-json reports/monitoring/drift_w6_smoke.json --output-md reports/monitoring/drift_w6_smoke.md",
      "duration_sec": 4.4014270305633545,
      "log_path": "reports/validation/logs/drift_monitor_smoke.log",
      "artifacts": null
    },
    {
      "name": "performance_monitor_smoke",
      "status": "pass",
      "detail": "exit=0; }",
      "command": "python3 -m src.monitoring.performance --predictions-csv reports/model/evaluation_predictions_v1_smoke.csv --output-json reports/monitoring/performance_w6_smoke.json --output-md reports/monitoring/performance_w6_smoke.md",
      "duration_sec": 4.031723976135254,
      "log_path": "reports/validation/logs/performance_monitor_smoke.log",
      "artifacts": null
    },
    {
      "name": "retrain_policy_smoke",
      "status": "pass",
      "detail": "exit=0; }",
      "command": "python3 -m src.retrain_policy --metrics-json models/metrics_v1_smoke.json --performance-json reports/monitoring/performance_w6_smoke.json --drift-csv reports/monitoring/drift_w6_smoke.csv --output-json reports/releases/retrain_decision_w6_smoke.json --output-md reports/releases/retrain_decision_w6_smoke.md",
      "duration_sec": 2.1904959678649902,
      "log_path": "reports/validation/logs/retrain_policy_smoke.log",
      "artifacts": null
    },
    {
      "name": "streamlit_app_smoke",
      "status": "pass",
      "detail": "app process stayed healthy for startup window",
      "command": "python3 -m streamlit run app.py --server.headless true --server.address 127.0.0.1 --server.port 8504",
      "duration_sec": 12.194754123687744,
      "log_path": "reports/validation/logs/streamlit_app_smoke.log",
      "artifacts": null
    },
    {
      "name": "artifact_inventory",
      "status": "pass",
      "detail": "all required artifacts present",
      "command": null,
      "duration_sec": 0.0,
      "log_path": null,
      "artifacts": [
        "reports/data/etl_run_20260211.md",
        "reports/data/etl_run_20260211.csv",
        "models/model_v1.joblib",
        "models/metrics_v1.json",
        "reports/model/segment_scorecard_v1.csv",
        "reports/model/shap_summary_v1.png",
        "reports/model/shap_waterfall_v1.png",
        "reports/monitoring/drift_latest.json",
        "reports/monitoring/performance_latest.json",
        "reports/releases/retrain_decision_latest.json",
        "app.py"
      ]
    },
    {
      "name": "docker_compose_stop_db",
      "status": "pass",
      "detail": "exit=0;  Container spec_nyc_db  Stopped",
      "command": "docker compose stop db",
      "duration_sec": 5.047257661819458,
      "log_path": "reports/validation/logs/docker_compose_stop_db.log",
      "artifacts": null
    },
    {
      "name": "release_tag",
      "status": "pass",
      "detail": "created git tag v1.0",
      "command": "git tag -a v1.0 -m \"S.P.E.C. NYC v1.0\"",
      "duration_sec": 0.0,
      "log_path": "reports/validation/logs/release_tag_create.log",
      "artifacts": null
    }
  ],
  "gates": {
    "Gate A (Data)": {
      "status": "done",
      "required_checks": [
        "unit_tests",
        "docker_compose_config",
        "docker_compose_up_db",
        "db_connectivity",
        "db_schema_create",
        "etl_smoke"
      ],
      "failed_checks": [],
      "missing_checks": []
    },
    "Gate B (Model)": {
      "status": "done",
      "required_checks": [
        "model_smoke",
        "evaluate_smoke",
        "explain_smoke",
        "artifact_inventory"
      ],
      "failed_checks": [],
      "missing_checks": []
    },
    "Gate C (Product)": {
      "status": "done",
      "required_checks": [
        "streamlit_app_smoke"
      ],
      "failed_checks": [],
      "missing_checks": []
    },
    "Gate D (Ops)": {
      "status": "done",
      "required_checks": [
        "mlflow_track_smoke",
        "drift_monitor_smoke",
        "performance_monitor_smoke",
        "retrain_policy_smoke"
      ],
      "failed_checks": [],
      "missing_checks": []
    },
    "Gate E (Release)": {
      "status": "done",
      "required_checks": [
        "Gate A (Data)",
        "Gate B (Model)",
        "Gate C (Product)",
        "Gate D (Ops)",
        "release_tag"
      ],
      "failed_checks": [],
      "missing_checks": [],
      "all_green": true
    }
  }
}